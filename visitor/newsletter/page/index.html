<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Newsletter</title>

    <script src="../js/rest.js"></script>
</head>
<body>



<!-- DELETE method -->
<form action='' method='POST' id="visitor-newsletter-delete">
<!--    <input type="hidden" name="_method" value="DELETE">-->
    <input type="hidden" name="id" value="1">
    <input type="submit" name="submit" value="Usuń subskrybcję">
</form>


<!-- PUT method -->
<form action='' method='POST'  id="visitor-newsletter-put">
<!--    <input type="text" name="_method" value="PUT">-->
    <input type="text" name="id" value="1">

    <input type="text" name="firstname" value="To">
    <input type="text" name="lastname" value="Sa">
    <input type="text" name="email" value="@">

    <input type="submit" name="submit" value="Zaktualizuj adres E-mail" >
</form>


<!-- READ method -->
<form action='' method='POST' id="visitor-newsletter-get">
    <input type="text" name="id" value="1">
    <input type="submit" name="submit" value="GET" >
</form>



<!-- POST method -->
<form action='' method='POST' id="visitor-newsletter-post">
<!--    <input type="text" name="firstname" value="To">-->
    <input type="text" name="name" value="Sa">
    <input type="text" name="email" value="@">

    <input type="submit" name="submit" value="Dodaj Subskrypcję">
</form>



<!--<form id="specialElementsForm">-->
<!--    <input type="hidden" name="CSR_check" value="i9dsFbYVfFiKdxsyCfym">-->
<!--    <button type="submit" name="logout">Logout</button>-->
<!--    <button type="submit" name="register">Register <b>button</b></button>-->
<!--    <button>First dummy button</button>-->
<!--    <button name="dummyButton">Second dummy button</button>-->
<!--    <input type="image" src="../img/test.png" name="imgBtn" value="Img button value" alt="Ghita" title="Ghita">-->
<!--</form>-->

<!--<form id="testForm" enctype="multipart/form-data">-->
<!--    <div id="fileFieldWrapper">-->
<!--        <input type="file" name="photo">-->
<!--    </div>-->
<!--    <div id="fileFieldsWrapper">-->
<!--        <input type="file" name="photos[]">-->
<!--        <input type="file" name="photos[]">-->
<!--        <input type="file" name="photos[]">-->
<!--    </div>-->
<!--    <div id="fileFieldsWrapper2">-->
<!--        <input type="file" name="photos2" multiple>-->
<!--    </div>-->
<!--</form>-->

<script src="../js/formToObject.min.js"></script>
<script>
    // formToObject('myFormId');
    // formToObject(document.getElementById('myFormId'));

	// var result = formToObject('specialElementsForm');
	// var result = formToObject('visitor-newsletter-delete');
	var result = formToObject('testForm');
	console.log(result);
</script>

<script>
    // document.getElementsByTagName('form[action=""]').value = '../php/index.php';
    var url = '../php/index.php';

    // document.getElementById("visitor-newsletter-delete").action = url;
    // document.getElementById("visitor-newsletter-put").action = url;
    // document.getElementById("visitor-newsletter-get").action = url;
    // document.getElementById("visitor-newsletter-create").action = url;

    var Newsletter = new Rest(url, '?');

    // read
    function NewsletterGet() {
        var data = formToObject('visitor-newsletter-get');
        var id = data.id;

        // console.log(Newsletter.all());
        console.log(Newsletter.get(id));
    }

    // create
    function NewsletterPost(){
        var data = formToObject('visitor-newsletter-post');
        delete data.submit;

        console.log(Newsletter.post(data));
    }

    // update
    function NewsletterPut() {
        var data = formToObject('visitor-newsletter-put');
        delete data.submit;
        var id = data.id;
        // data.firstname = "John3";
        // data.lastname = "Snow3";
        // update
        console.log(Newsletter.put(id, data));
    }

    function NewsletterDelete() {
        var data = formToObject('visitor-newsletter-put');
        var id = data.id;
        console.log(Newsletter.delete(id));
    }



    document.getElementById('visitor-newsletter-get').addEventListener("click", function(event){
        event.preventDefault();
        NewsletterGet();
    });

    document.getElementById('visitor-newsletter-post').addEventListener("click", function(event){
        event.preventDefault();
        NewsletterPost();
    });

    document.getElementById('visitor-newsletter-put').addEventListener("click", function(event){
        event.preventDefault();
        NewsletterPut();
    });

    document.getElementById('visitor-newsletter-delete').addEventListener("click", function(event){
        event.preventDefault();
        NewsletterDelete();
    });
</script>


</body>
</html>