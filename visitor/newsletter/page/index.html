<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Newsletter</title>

    <script src="../js/rest.js"></script>
</head>
<body>


<script src="../js/formToObject.min.js"></script>
<script>
    // formToObject('myFormId');
    // formToObject(document.getElementById('myFormId'));

    // var result = formToObject('specialElementsForm');
    // var result = formToObject('visitor-newsletter-delete');
    // var result = formToObject('testForm');
    // console.log(result);


    function trim(str) {
        return str.replace(/^\s+|\s+$/g, '');
    }

    function getElement(id) {
        if (document.getElementById) {
            return document.getElementById(id);
        } else if (document.all) {
            return window.document.all[id];
        } else if (document.layers) {
            return window.document.layers[id];
        }
    }
</script>


<!-- DELETE method -->
<form action='' method='POST' id="visitor-newsletter-delete">
    <input type="hidden" name="method" value="DELETE">

    <input type="hidden" name="id" value="1">
    <input type="submit" name="submit" value="Usuń subskrybcję">
</form>


<!-- PUT method -->
<form action='' method='POST' id="visitor-newsletter-put">
    <input type="hidden" name="method" value="PUT">

    <!--    <input type="text" name="_method" value="PUT">-->
    <input type="text" name="id" value="1">

    <input type="text" name="firstname" value="To">
    <input type="text" name="lastname" value="Sa">
    <input type="text" name="email" value="@">

    <input type="submit" name="submit" value="Zaktualizuj adres E-mail">
</form>


<!-- READ method -->
<form action='' method='POST' id="visitor-newsletter-get">
    <input type="hidden" name="method" value="GET">

    <input type="text" name="id" value="1">
    <input type="submit" name="submit" value="Pobierz Status">
</form>


<!-- POST method -->
<form action='' method='POST' id="visitor-newsletter-post">
    <input type="hidden" name="method" value="POST">

    <!--    <input type="text" name="firstname" value="To">-->
    <input type="text" name="name" value="Sa">
    <input type="text" name="email" value="@">

    <input type="submit" name="submit" value="Dodaj Subskrypcję">
</form>


<!--<form id="specialElementsForm">-->
<!--    <input type="hidden" name="CSR_check" value="i9dsFbYVfFiKdxsyCfym">-->
<!--    <button type="submit" name="logout">Logout</button>-->
<!--    <button type="submit" name="register">Register <b>button</b></button>-->
<!--    <button>First dummy button</button>-->
<!--    <button name="dummyButton">Second dummy button</button>-->
<!--    <input type="image" src="../img/test.png" name="imgBtn" value="Img button value" alt="Ghita" title="Ghita">-->
<!--</form>-->

<!--<form id="testForm" enctype="multipart/form-data">-->
<!--    <div id="fileFieldWrapper">-->
<!--        <input type="file" name="photo">-->
<!--    </div>-->
<!--    <div id="fileFieldsWrapper">-->
<!--        <input type="file" name="photos[]">-->
<!--        <input type="file" name="photos[]">-->
<!--        <input type="file" name="photos[]">-->
<!--    </div>-->
<!--    <div id="fileFieldsWrapper2">-->
<!--        <input type="file" name="photos2" multiple>-->
<!--    </div>-->
<!--</form>-->

<script>
    // document.getElementsByTagName('form[action=""]').value = '../php/index.php';
    var url = '../php/index.php';

    // document.getElementById("visitor-newsletter-delete").action = url;
    // document.getElementById("visitor-newsletter-put").action = url;
    // document.getElementById("visitor-newsletter-get").action = url;
    // document.getElementById("visitor-newsletter-create").action = url;

    var Newsletter = new Rest(url, '?', function (data) {
        console.error(data);
    }, function (data) {
        console.table(data);
    });


    var forms = document.getElementsByTagName('form');
    // console.log(forms);
    for (var i = 0; i < forms.length; i++) {

        console.log(forms[i]);

        forms[i].addEventListener("submit", function (event) {
            console.log(this);

            var data = formToObject(this);
            var method = data.method;
            delete data.method;
            delete data.submit;

            console.log(method);

            Newsletter.byMethod(method, data);
            //
            // if (method === 'GET') {
            //     var id = data.id;
            //     Newsletter.get(id);
            // }
            //
            // if (method === 'POST') {
            //     Newsletter.post(data);
            // }
            //
            // if (method === 'PUT') {
            //     var id = data.id;
            //     Newsletter.put(id, data);
            // }
            //
            // if (method === 'DELETE') {
            //     var id = data.id;
            //     Newsletter.delete(id);
            // }

            console.log(data);

            event.preventDefault();
        });
    }

    //
    // document.getElementsByTagName('form').addEventListener("submit", function (event) {
    //     console.log(this);
    //     event.preventDefault();
    // });
    //
    // document.getElementById('visitor-newsletter-get').addEventListener("click", function(event){
    //     event.preventDefault();
    //     NewsletterGet();
    // });
    //
    // document.getElementById('visitor-newsletter-post').addEventListener("click", function(event){
    //     event.preventDefault();
    //     NewsletterPost();
    // });
    //
    // document.getElementById('visitor-newsletter-put').addEventListener("click", function(event){
    //     event.preventDefault();
    //     NewsletterPut();
    // });
    //
    // document.getElementById('visitor-newsletter-delete').addEventListener("click", function(event){
    //     event.preventDefault();
    //     NewsletterDelete();
    // });
</script>


</body>
</html>